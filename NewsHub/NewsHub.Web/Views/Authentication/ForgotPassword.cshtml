@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
    Layout = "~/Views/Shared/_LayoutAuth.cshtml";
    ViewData["Title"] = "Forgot Password";
}

<div id="step-email" class="bg-white dark:bg-surface-800 rounded-2xl border border-surface-200 dark:border-surface-700 shadow-xl shadow-surface-200/50 dark:shadow-surface-950/50 p-8">
    <form onsubmit="handleRequestReset(event)">
        <!-- Email -->
        <div class="mb-6">
            <label for="email" class="block text-sm font-medium text-surface-700 dark:text-surface-300 mb-1.5">Correo electronico</label>
            <div class="relative">
                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                    <i data-lucide="mail" class="w-4 h-4 text-surface-400"></i>
                </div>
                <input type="email" id="email" name="email" placeholder="tu@correo.com" required
                       class="w-full pl-10 pr-4 py-2.5 text-sm rounded-xl border border-surface-200 dark:border-surface-600 bg-surface-50 dark:bg-surface-700 text-surface-900 dark:text-surface-100 placeholder-surface-400 focus:outline-none focus:ring-2 focus:ring-brand-500 focus:border-transparent transition-all" />
            </div>
        </div>
        <!-- Error message -->
        <div id="error-msg" class="hidden mb-4 p-3 rounded-xl bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-600 dark:text-red-400 text-sm flex items-center gap-2">
            <i data-lucide="alert-circle" class="w-4 h-4 shrink-0"></i>
            <span id="error-text"></span>
        </div>
        <!-- Submit -->
        <button type="submit"
                class="w-full flex items-center justify-center gap-2 px-4 py-3 text-sm font-semibold rounded-xl bg-brand-500 text-white hover:bg-brand-600 shadow-lg shadow-brand-500/25 transition-all hover:shadow-xl hover:shadow-brand-500/30 focus:outline-none focus:ring-2 focus:ring-brand-500 focus:ring-offset-2 dark:focus:ring-offset-surface-800">
            <i data-lucide="send" class="w-4 h-4"></i>
            Enviar instrucciones
        </button>
    </form>
</div>

<!-- Step 2: Success message -->
<div id="step-success" class="hidden bg-white dark:bg-surface-800 rounded-2xl border border-surface-200 dark:border-surface-700 shadow-xl shadow-surface-200/50 dark:shadow-surface-950/50 p-8">
    <div class="flex flex-col items-center text-center">
        <div class="w-16 h-16 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center mb-4">
            <i data-lucide="mail-check" class="w-8 h-8 text-green-600 dark:text-green-400"></i>
        </div>
        <h2 class="text-lg font-semibold text-surface-900 dark:text-surface-100 mb-2">Correo enviado</h2>
        <p class="text-sm text-surface-500 dark:text-surface-400 mb-6">
            Si el correo <strong id="sent-email" class="text-surface-700 dark:text-surface-300"></strong> esta registrado, recibiras un enlace para restablecer tu contrasena en unos minutos.
        </p>
        <p class="text-xs text-surface-400 mb-6">No olvides revisar tu carpeta de spam.</p>
        <a href="login.html"
           class="w-full flex items-center justify-center gap-2 px-4 py-3 text-sm font-semibold rounded-xl bg-brand-500 text-white hover:bg-brand-600 shadow-lg shadow-brand-500/25 transition-all hover:shadow-xl hover:shadow-brand-500/30">
            <i data-lucide="log-in" class="w-4 h-4"></i>
            Volver al login
        </a>
    </div>
</div>

<!-- Login link -->
<div class="mt-6 text-center">
    <p class="text-sm text-surface-500 dark:text-surface-400">
        Recordaste tu contrasena?
        <a asp-controller="Authentication" asp-action="Login" class="font-medium text-brand-600 dark:text-brand-400 hover:underline">Inicia sesion</a>
    </p>
</div>